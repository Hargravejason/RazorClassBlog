@using Microsoft.AspNetCore.Http
@using Microsoft.Extensions.Options
@model RazorClassBlog.Models.BlogPost;
@inject IOptions<BlogOptions> Options;
@inject IHttpContextAccessor HttpContextAccessor

@* 
  Custom JSON-LD for BlogPosting schema as needed
*@
@{
  string heroImageUrl = Model.HeroImageUrl ?? "https://cdn.AcmeAces.com/images/HomePage.jpg";
  var request = HttpContextAccessor.HttpContext?.Request;
  var blogUrl = Url.Page("Index", null, new { area = "Blog" }, protocol: request?.Scheme);
}
<script type="application/ld+json">
  {
    "@@context": "https://schema.org",
    "@@type": "BlogPosting",
    "headline": "@Model.Title",
    "description":"@ViewData["Description"]",
    "datePublished": "@(Model.PublishedUtc?.UtcDateTime.ToString("O") ?? Model.CreatedUtc.UtcDateTime.ToString("O"))",
    "dateModified": "@(Model.UpdatedUtc?.UtcDateTime.ToString("O") ?? Model.CreatedUtc.UtcDateTime.ToString("O"))",
    "author": {
      "@@type": "@(Model.AuthorName == Options.Value.DefaultOrganizationName ? "Organization" : "Person")",
      "name": "@(Model.AuthorName ?? Options.Value.DefaultOrganizationName ?? "Unknown")"
    },
    "publisher": {
      "@@type": "Organization",
      "name": "@Options.Value.DefaultOrganizationName",
      "logo": {
        "@@type": "ImageObject",
        "url": "@Options.Value.DefaultOrganizationImageURL"
      }
    },
    "image": [
      "@heroImageUrl"
    ],
    "isPartOf": {
      "@@type": "Blog",
      "name": "@Options.Value.PublicDisplayName",
      "url": "@blogUrl"
    },
    "mainEntityOfPage": {
      "@@type": "WebPage",
      "@@id": "@ViewData["canonical"]"
    }
  }
</script>